<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, 
                                   initial-scale=1, 
                                   shrink-to-fit=no" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Vakumtasak|Levai Pack</title>
    <base target="_self">

    <link rel="stylesheet" href="root-directories/root-css-2022/style.css?t=123" />

</head>

<body id="start">
    <a href="index3d2022.html" title="Főoldal">
        <div class="animation">
            <div class="cube-mini">
                <div class="cube_face-mini cube_face-front-mini">Kft.</div>
                <div class="cube_face-mini cube_face-left-mini">Pack</div>
                <div class="cube_face-mini cube_face-top-mini">Lévai</div>
            </div>
        </div>
    </a>
    <header class="right vertical">
        <h1>
            Lévai&nbsp;Pack&nbsp;Kft.
        </h1>
    </header>

    <form id="orderForm" action="https://levaipack.hu/order.php" method="post">
        <header id="orderText">
            <h2>
                <i>VÁKUMTASAK&nbsp;RENDELÉS</i>
            </h2>
            <textarea id="orderList" name="orderList" readonly>Kosár:</textarea>
        </header>
        <section id="inputList" class="center vertical">
            <div class="center vertical fillParentsWidth">
                <header class="fillParentsWidth txtleft">
                    <h3 style="margin:0;">
                        Részletek:
                    </h3>
                    <div id="orderdetails">

                    </div>
                </header>
                <div>

                </div>
            </div>
            <article class="right vertical">
                <div>
                    <label for="materialnames">Anyagtípus és vastagság: </label>
                    <select id="materialnames" class="orderlistDropdown" name="materialname" onchange="setMaterial();">
                        <option value="?">válassz!</option>
                        <option value="PA/PE 70">Vákumtasak PA/PE 70</option>
                        <option value="PA/PE 90">Vákumtasak PA/PE 90</option>
                    </select>
                </div>
                <div>
                    <label for="sizes">Méretek és árak: </label>
                    <select id="sizes" class="orderlistDropdown" name="size" onchange="setSize();">
                        <option value=""> </option>
                    </select>
                </div>
                <div>
                    <label for="quantity">Mennyiség (db): </label>
                    <input type="number" id="quantity" class="orderlistQuantity" name="quantity" value="" step="1000" min="0" max="0" onchange="setQuantity();" onKeyDown="return false;" />
                </div>
                <div>
                    <button id="orderlistBtn" class="orderlistButton" onclick="setBasket(); return false;"> Hozzáad a kosárhoz! </button>
                </div>
            </article>
            <article class="center vertical">
                <div class="right vertical">
                    <div>
                        <label for="mail">E-mail:</label>
                        <input type="email" id="mail" name="mail" placeholder="szükséges" required /><br />
                    </div>
                    <hr />
                    <div>
                        <label for="mail">Telefon:</label>
                        <input type="tel" id="phone" name="phone" placeholder="szükséges" required /><br />
                    </div>
                </div>

                <p>
                    A megadott e-mail címre megküldjük a megrendelés másolatát. Kérjük kattintson az e-mailben található megerősítő hivatkozásra, így véglegesítve a megrendelést. Munkatársunk a megadott telefonszámon keresni fogja a számlázással és a szállítással kapcsolatban.
                </p>
                <input type="submit" value=" Megrendel " />
            </article>
        </section>
    </form>



    <footer class="bottom center static">
        <h4>
            HU-1113 Budapest Ábel Jenő utca 7.
            <br /> &#9993; info@levaipack.hu | &#9743; 30-7434249
        </h4>
    </footer>

    <script src="https://levaipack.hu/levAIgoods/size70.js"></script>
    <script src="https://levaipack.hu/levAIgoods/size90.js"></script>

    <script>
        let orderList = document.getElementById('orderList');
        let inputList = document.getElementById('inputList');
        let materialnames = document.getElementById('materialnames');
        let sizes = document.getElementById('sizes');
        let quantity = document.getElementById('quantity');
        let orderlistBtn = document.getElementById('orderlistBtn');
        let orderdetails = document.getElementById('orderdetails');

        let material = '',
            price = 0,
            formattedPrice = '',
            selectItem = null,
            basket = [],
            storage = [],
            karton = 1,
            thousands = 1000;

        let detailLines = 1;
        let orderLines = 0;
        let orderTextContent = "Kosár:"
        let orderdetailsHtml = "";


        function setOption(item, index) {
            if (item.stock < 1000) return false;
            if (material == item.material) {
                sizes.innerHTML += item.option;
            }
        }

        function clearSizes() {
            if (material == "?") {
                sizes.innerHTML = '<option value=""> </option>';
            } else {
                sizes.innerHTML = '<option value="?">válassz!</option>';
            }
            orderdetails.innerHTML = orderdetailsHtml;
            quantity.value = '';
            selectItem = null;
        }

        function setMaterial() {
            material = materialnames.options[materialnames.selectedIndex].value;
            clearSizes();
            storage.forEach(setOption);
        }

        function formatCurrency(number) {
            return new Intl.NumberFormat('hu-HU', {
                style: 'currency',
                currency: 'HUF'
            }).format(number);
        }

        function displayOrder() {
            orderdetails.innerHTML = orderdetailsHtml + '<br />' + '<div id="goods' + detailLines + '"><pre>' + selectItem.name + "<br />" + (" " + karton).padStart(3, " ") + " karton( =" + (quantity.value + "db): ").padStart(12, " ") + formattedPrice.padStart(15, " ") + '</pre></div>';
        }

        function setSize() {
            selectItem = storage[sizes.options[sizes.selectedIndex].value];
            formattedPrice = formatCurrency(1000 * selectItem.price);
            quantity.min = thousands;
            quantity.max = selectItem.stock;
            quantity.value = thousands;
            displayOrder();
        }

        function setQuantity() {
            let quantityValue = quantity.value;
            karton = quantityValue / thousands;
            formattedPrice = formatCurrency(quantityValue * selectItem.price);
            displayOrder();
        }

        let basketSum;

        function basketLine(item, index) {
            let linetext = item.stock + " db " + item.material + " " + item.name;
            basketSum += item.stock * selectItem.price;
            let sum = formatCurrency(item.stock * selectItem.price);
            orderList.innerHTML += "\n" + linetext.padEnd(40, " ") + ":" + sum.padStart(16, " ");
        }

        function displayBasket() {
            basketSum = 0;
            orderList.rows = 2 + basket.length;
            orderList.innerHTML = orderTextContent;
            basket.forEach(basketLine);
            orderList.innerHTML += "\n" + "Összesen:".padStart(41, " ") + formatCurrency(basketSum).padStart(16, " ");
        }

        function setBasket() {
            if (selectItem == null) {
                alert("Nincs kijelölt árucikk!");
            } else {
                selectItem.stock -= quantity.value;
                let name = selectItem.name.replace("Vákuumtasak ", "");
                const element = {
                    id: detailLines,
                    storageID: selectItem.id,
                    stock: quantity.value,
                    material: material,
                    name: name,
                    price: selectItem.price
                }
                basket.push(element);
                orderdetailsHtml = orderdetails.innerHTML;
                displayBasket();
                detailLines++;
            }
            materialnames.selectedIndex = 0;
            setMaterial();
        }

        let itemid = 0;

        function makeOptions(item, index) {
            let stock = parseInt(item);
            if (stock <= 0) return false;
            let itemprice = parseInt(item.slice(item.lastIndexOf(" ")));
            stockItem = item.slice(item.indexOf(" "));
            let option = '<option value="' + itemid + '">' + stockItem + '</option>';
            const element = {
                id: itemid,
                material: material,
                stock: stock,
                name: stockItem,
                price: itemprice,
                option: option
            };
            storage.push(element);
            itemid++;
        }

        function loadSizes70(name) {
            material = name;
            size70.forEach(makeOptions);
        }

        function loadSizes90(name) {
            material = name;
            size90.forEach(makeOptions);
        }

        loadSizes70("PA/PE 70");
        loadSizes90("PA/PE 90");
    </script>
</body>

</html>